<!DOCTYPE html>
<html ng-app="myApp">
<head>
	<meta charset="UTF-8">
	<title>Interlace Interface</title>
	<link rel="stylesheet" type="text/css" href="styles.css"></link>

	<link href='http://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

	<link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>

	<script src="lib/Angular/angular.min.js" type="text/javascript" ></script>
	<script src="js/controllers.js" type="text/javascript" ></script>
	<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
	<script src="/socket.io/socket.io.js"></script>
</head>

<body ng-controller="InterfaceController">

<!-- Chat Box -->
<div class = "chatBox">
<ul id="messages"></ul>
	<h1>{{pageData.promptTitle}}</h1>
    <form action="">
      <input id="sentMessage" autocomplete="off" /><button>Send</button>
    </form>

    <script src="/socket.io/socket.io.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script src="js/controllers.js" type="text/javascript" ></script>
    <!--<script src="js/services.js" type="text/javascript" ></script>-->
      <script>

        var socket = io.connect();
        $('form').submit(function(){
        	//sayHi();
          	socket.emit('chatmessage', $('#sentMessage').val());
          	$('#sentMessage').val(''); //Clears content in personal msg box
          	return false
        });
          socket.on('chatmessage', function(msg){
           $('#messages').append($('<li>').text(msg));
          });
      </script>
</div>

	<div class="header">
      <h1>{{pageData.promptTitle}}</h1>
      <h2>{{pageData.promptText}}</h2>
      <h3>{{pageData.teacherName}}</h3>
      <h3>{{pageData.date}}</h3>

      <br>

	<p>Order by</p>
      <select ng-model="myVar">
			<option value="name">Name
			<option value="time">Time
			<option value="other">Original
		</select>
    </div>

	<div class="ideaPanel">

		<hr>
			<div ng-switch="myVar">

				<!-- When "name" is selected -->
				<div ng-switch-when="name">
					<div ng-repeat="item in pageData.ideas | orderBy: 'name'" class = "ideaBox">
					<h2 id = "ideaName"> {{item.name}}</h2>
					<p class = "likes" ng-click="plusOne(item.name)">+ {{ item.likes }} </p>
					<!--<button ng-click="plusOne(item.name);">CLICK{{item.likes}}</button>-->

					<!--Load textcontent -->
					<div class = "contentBox" ng-if=item.contentType=="text">
						<p id = "ideaText"> {{item.content}} </p>
					</div>

					<!--Load image content -->
					<div class = "contentBox" ng-if=item.contentType=="image">
						<img ng-src={{item.content}} style="max-width:100%; max-height:100%">
					</div>

					<p id = "ideaTime"> {{item.time * 1000 | date:'MM-dd-yyyy HH:mm'}} </p>

					</div>
				</div>

				<!-- When "time" is selected -->
				<div ng-switch-when="time">
					<div ng-repeat="item in pageData.ideas | orderBy: 'time'" class = "ideaBox">
					<h2 id = "ideaName"> {{item.name}}</h2>
					<p class = "likes" ng-click="plusOne(item.name)">+ {{ item.likes }} </p>

					<!--Load textcontent -->
					<div class = "contentBox" ng-if=item.contentType=="text">
						<p id = "ideaText"> {{item.content}} </p>
					</div>

					<!--Load image content -->
					<div class = "contentBox" ng-if=item.contentType=="image">
						<img ng-src={{item.content}} style="max-width:100%; max-height:100%">
					</div>

					<p id = "ideaTime"> {{item.time * 1000 | date:'MM-dd-yyyy HH:mm'}} </p>

					</div>
				</div>

				<div ng-switch-when="other">
					<div ng-repeat="item in pageData.ideas" class = "ideaBox">
						<h2 id = "ideaName"> {{item.name}}</h2>
						<p class = "likes" ng-click="plusOne(item.name)">+ {{ item.likes }} </p>

						<!--Load textcontent -->
						<div class = "contentBox" ng-if=item.contentType=="text">
							<p id = "ideaText"> {{item.content}} </p>
						</div>

						<!--Load image content -->
						<div class = "contentBox" ng-if=item.contentType=="image">
							<img ng-src={{item.content}} style="max-width:100%; max-height:100%">
						</div>

						<p id = "ideaTime"> {{item.time * 1000 | date:'MM-dd-yyyy HH:mm'}} </p>

					</div>
				</div>

				<!-- Default: Load as in JSON file -->
				<div ng-switch-default>
					<div ng-repeat="item in pageData.ideas" class = "ideaBox">
						<h2 id = "ideaName"> {{item.name}}</h2>
						<p class = "likes" ng-click="plusOne(item.name)">+ {{ item.likes }} </p>

						<!--Load textcontent -->
						<div class = "contentBox" ng-if=item.contentType=="text">
							<p id = "ideaText"> {{item.content}} </p>
						</div>

						<!--Load image content -->
						<div class = "contentBox" ng-if=item.contentType=="image">
							<img ng-src={{item.content}} style="max-width:100%; max-height:100%">
						</div>

						<p id = "ideaTime"> {{item.time * 1000 | date:'MM-dd-yyyy HH:mm'}} </p>

					</div>
				</div>
			</div>
		<hr>

	</div>



</div>

</body>
</html>